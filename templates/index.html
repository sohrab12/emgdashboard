
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">

<html>
<head>
<title>EMG Treasury Dashboard</title>

<link href="/static/style.css" rel="stylesheet" type="text/css" media="screen" />
<script type="text/javascript" src="/static/jquery.js"></script>

<link rel="stylesheet" href="/static/jquery.autocomplete.css" type="text/css" />
<script type="text/javascript" src="/static/jquery.autocomplete.js"></script>

<link rel="stylesheet" href="/static/jquery.selectlist-0.1.2/css/selectlist.css" type="text/css" />
<script type="text/javascript" src="/static/jquery.selectlist-0.1.2/scripts/jquery.selectlist.js"></script>




<script type="text/javascript">

function menuSelection(){}


function updateQueryInfo(source)
{	
	localQueryInfo = document.addWidgetForm.queryInfo.value;
	localQueryInfo += "stock:" + document.getElementById(source).value + ",";	
	document.addWidgetForm.queryInfo.value = localQueryInfo;		
}




function selectZoom(id)
{
	document.getElementById('hour').style.fontWeight = 'normal';
	document.getElementById('day').style.fontWeight = 'normal';
	document.getElementById('week').style.fontWeight = 'normal';
	document.getElementById('month').style.fontWeight = 'normal';
	document.getElementById('year').style.fontWeight = 'normal';
	document.getElementById(id).style.fontWeight = 'bold';
	document.addWidgetForm.zoom.value = id;
}


function collapseMenus()
{		
	document.getElementById('addWidgetMenu').style.display = 'none';
	document.getElementById('exportMenu').style.display = 'none';
	document.getElementById('manageKitMenu').style.display = 'none';	
}


function cancelAddWidget()
{
	$("#addWidgetMenu").slideToggle("slow");
	$(this).toggleClass("active");
}


function cancelExport()
{
	$("#exportMenu").slideToggle("slow");
	$(this).toggleClass("active");
}


function cancelKit()
{
	$("#manageKitMenu").slideToggle("slow");
	$(this).toggleClass("active");	
}


function displayContentOptions(selectedOption)
{
	document.getElementById('stocksListDiv').style.display = 'none';
	document.getElementById('bondsListDiv').style.display = 'none';
	document.getElementById('actualsListDiv').style.display = 'none';
	document.getElementById('investmentsListDiv').style.display = 'none';
	
	if (selectedOption == 'stocks')
		document.getElementById('stocksListDiv').style.display = 'inline';
	else if (selectedOption == 'bonds')
		document.getElementById('bondsListDiv').style.display = 'inline';
	else if (selectionOption = 'actuals')
		document.getElementById('actualsListDiv').style.display = 'inline';
	else if (selectionOption = 'investments')
		document.getElementById('investmentsListDiv').style.display = 'inline';
		
}

var data = "";
</script>



{% for StockPrice in stockList %}
<script type="text/javascript">
	data += "{{ StockPrice.symbol }} "
</script>	
{% endfor %}




<script type="text/javascript">



$(document).ready(function(){
						   
	$('select#stocksGraphSymbol').selectList('div#addSelections',{ 
		addAnimate: function (item, callback) { 
			$(item).slideDown(500, callback); 
			updateQueryInfo('stocksGraphSymbol');}, 
		
		removeAnimate: function (item, callback) { 
			$(item).slideUp(500, callback);} 
	});   
	
	

//  var data = "Core Selectors Attributes Traversing Manipulation CSS Events Effects Ajax Utilities".split(" ");
	data = data.split(" ");	 
	$("#stocksGraphSymbolSearchBox").autocomplete(data);

	
	
	
	$(".addWidget").click(function(){		
		collapseMenus();
		document.getElementById('addWidgetMenu').style.display = '';
		$("#addWidgetMenu").show();
	});
		
	
	$(".exportWidget").click(function(){
		collapseMenus();
		document.getElementById('exportMenu').style.display = '';		
		$("#exportMenu").show();
	});
	

	$(".manageKit").click(function(){
		collapseMenus();
		document.getElementById('manageKitMenu').style.display = '';
		$("#manageKitMenu").show();
	});
	
	 
});
</script>



</head>
<body>


<div id="header">
	<div id="logo">
		<h1><a>EMG Treasury Dashboard</a></h1>
	</div>
	<div id="menu">
		<ul>
			<li><a href="javascript:menuSelection()" class="addWidget">Add Widget</a></li>
			<li><a href="javascript:menuSelection()" class="exportWidget">Export</a></li>
			<li class="last"><a href="javascript:menuSelection()" class="manageKit">Manage Kit</a></li>
            
		</ul>
	</div>
</div>
<!-- start page -->

<div id="page">
    <div id="addWidgetMenu" style="display:none">
    
       
    
    
    <form name="addWidgetForm" action="addWidget/" method="post">
    <table border="0" height="75">
    <tr>
    	<td valign="top"> 
            <select size="4" name="graphType" id="graphType">
                <option value="barGraph">Bar Graph</option>
                <option value="lineGraph">Line Graph</option>
                <option value="pieChart">Pie Chart</option>
                <option value="table">Table</option>                
                <option value="histogram">Ticker</option>
            </select>
            &nbsp;&nbsp;&nbsp;
        </td>
        <td valign="top">
            <select size="4" name="graphContent" id="graphContent" onChange="javascript:displayContentOptions(this.value)" multiple>
                <option value="stocks">Stocks</option>
                <option value="bonds">Bonds</option>
                <option value="actuals">Actuals</option>
                <option value="investments">Investments</option>
            </select>
            &nbsp;&nbsp;&nbsp;
        </td>
        <td valign="top">
	       	<div id="stocksListDiv">
            <select size="4" name="stocksGraphSymbol" id="stocksGraphSymbol" style="width:107px" multiple>           			
            {% for StockPrice in stockList %}
                <option value= "{{ StockPrice.symbol }}">{{ StockPrice.symbol }}</option>
            {% endfor %}            
            </select>
            <br>
            <input type="text" name="stocksGraphSymbolSearch" id="stocksGraphSymbolSearchBox" size="10">
            </div>
            
            <div id="bondsListDiv" style="display:none">
            <select size="4" name="bondsGraphSymbol" id="bondsGraphSymbol" style="width:107px" multiple>    
                <option vlaue="test">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</option>            
            </select>
            </div>

            <div id="actualsListDiv" style="display:none">
            <select size="4" name="actualsGraphSymbol" style="width:107px" multiple>    
                <option vlaue="test">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</option>            
            </select>
            </div>
           
             <div id="investmentsListDiv" style="display:none">
            <select size="4" name="investmentsGraphSymbol" id="investmentGraphSymbol" style="width:107px" multiple>    
                <option vlaue="test">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</option>            
            </select>
            </div>            
        </td>
        <td width="25">&nbsp;
        	
        </td>
        <td align="right">
        	<!--
            <br>
				<input type="text" name="startDate">
 			<br><br>
				<input type="text" name="startDate">
            -->
           
            

            <div id="addSelections" style="width:230px;height:100px;">
			</div>

            
            <br><br>
            <b>Zoom:</b>&nbsp;
            <span id="hour"><a href="javascript:selectZoom('hour')">Hour</a></span> |
            <span id="day"><a href="javascript:selectZoom('day')">Day</a></span> |
            <span id="week" style="font-weight:bold"><a href="javascript:selectZoom('week')">Week</a></span> |
            <span id="month"><a href="javascript:selectZoom('month')">Month</a></span> |
            <span id="year"><a href="javascript:selectZoom('year')">Year</a></span>
            <br><br>
            <input type="hidden" name="zoom" value="week">
            <input type="hidden" name="queryInfo" value="">
            <input type="hidden" name="dashboardID" value="{{ dashboard.pk }}">
        </td>            
    </tr>    
    <tr>
    	<td colspan="5" align="right">
        	<input type="button" name="clear" value="Clear" class="btn">
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <input type="button" name="cancel" value="Cancel" onClick="javascript:cancelAddWidget()" class="btn">
            <input type="submit" name="addWidget" value="Add Widget" class="btn">
        </td>
    </tr>
    </table>
    </form>
    </div>
	
    
    <!-- Export Menu-->
    <div id="exportMenu" style="display:none">
    <form name="exportForm" action="" method="post">
    <table border="0" height="75">
    <tr>
    	<td> 
        	<font style="font-family:Verdana, Geneva, sans-serif; font-size:18px">
        		Select the widget(s) you are interested in exporting, then click on the desired format.
        	</font>
        </td>        
    </tr>    
    <tr>
    	<td align="right">
        	<input type="button" name="cancel" value="Cancel" onClick="javascript:cancelExport()" class="btn">
        	&nbsp;&nbsp;&nbsp;Export to
            <input type="Submit" name="excel" value="Excel" class="btn">
            <input type="Submit" name="pdf" value="PDF" class="btn">
            <input type="Submit" name="png" value="PNG" class="btn">
        </td>   
    </tr>   
    </table>
    </form>
    </div>
    
    <!-- Manage Kit Menu -->
    <div id="manageKitMenu" style="display:none">
    <form name="manageKitForm" action="" method="post">
    <table border="0" height="75">
    <tr>
    	<td valign="top"> 
        	<font style="font-family:Verdana, Geneva, sans-serif; font-size:14px;">
	        	Select the widget(s) you are intrested in adding into your new <br>
    	        kit, then name your kit in the text box, and press "Make Kit".        
            </font>
        </td>
        <td width="20">&nbsp;</td>        
        <td>
        	<font style="font-family:Verdana, Geneva, sans-serif; font-size:12px">
	        	Name of new Kit:
            </font>
            <br>
    	    <input type="text" name="kitName" width="30">             
            <br><br><br>
        </td>
    </tr>    
    <tr>
    	<td colspan="3" align="right">
        	<input type="button" name="applyChanges" value="Apply Changes" class="btn">
            <input type="button" name="cancel" value="Cancel" onClick="javascript:cancelKit()" class="btn">
            <input type="button" name="makeKit" value="Make Kit" class="btn">
        </td>
    </tr>
    </table>
    </form>
    </div>
    
    


</div>

	<!-- start content -->



	<div id="widgetList">
    
	<table width="95%">    	
    	<tr>
        	{% for Widget in widgets %}
        	<td align="center"><iframe src="/dashboard/linewidget/{{ Widget.pk }}" width="450" height="500" frameborder="0"></iframe></td>
            {% endfor %}
        </tr>
       
	</table>
	</div>
	<!-- end content -->

<!-- end page -->

</body>
</html>
